#! /bin/sh

# ~/.config/bspwm/bspwmrc
#
# Configuration file for bspwm

# Essentials
# -----------------------------------------------------------------------------
## Truncate a pair of common commands frequently used
_bc() {
	bspc config "$@"
}

_check() {
	command -v "$1" > /dev/null
}


# Visual options
# -----------------------------------------------------------------------------
_bc automatic_scheme longest_side
_bc initial_polarity second_child
_bc split_ratio	0.5
_bc border_width 2
_bc window_gap 8
_bc pointer_modifier mod4
_bc single_monocle true
_bc gapless_monocle false

## Determine XrandR settings
#_check ~/.local/bin/bspwm_dual_monitor && ~/.local/bin/bspwm_dual_monitor
xrandr --output DP-0 --primary --mode 1920x1080 --rotate normal \
    --output HDMI-0 --mode 1920x1080 --rate 75 --rotate normal --left-of DP-0 &

## Define desktops per monitor
#_check ~/.local/bin/bspwm_conf_desktops && ~/.local/bin/bspwm_conf_desktops
bspc monitor DP-0 -d 1 2 3 4 5 6
bspc monitor HDMI-0 -d 7 8 9 10

## TODO Borders settings
# source $HOME/.local/share/my_colours/tempus_night.sh
_bc normal_border_color "#312e30"
_bc active_border_color "#b1942b"
_bc focused_border_color "#6da280"
_bc presel_feedback_color "#2a2829"

# Autostart
# -----------------------------------------------------------------------------
## Hotkey daemon
_check sxhkd && sxhkd & 

## Polybar
_check polybar && $HOME/.config/polybar/launch.sh &

## Background setting
_check nitrogen && nitrogen --restore &

_check flameshot && flameshot &

_check pasystray && pasystray &

_check redshift && redshift -l 44.570480:10.905630 &

## Use the same cursor everywhere
_check xsetroot && xsetroot -xcf /usr/share/icons/Adwaita/cursors/left_ptr 16

## Compositor
_check picom && picom &

## SSH agent
if ! pgrep -u "$USER" ssh-agent > /dev/null; then
    ssh-agent -t 1h > "$XDG_RUNTIME_DIR/ssh-agent.env"
fi
if [[ ! "$SSH_AUTH_SOCK" ]]; then
    source "$XDG_RUNTIME_DIR/ssh-agent.env" >/dev/null
fi

# Authentication agent
auth_agent="/usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1"
_check $auth_agent && $auth_agent
